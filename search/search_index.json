{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"nhs-number","text":"<pre><code>&gt;&gt;&gt; import nhs_number\n\n# Validation\n&gt;&gt;&gt; nhs_number.is_valid('469 819 4180')\nTrue\n\n# Generation (for testing purposes)\n&gt;&gt;&gt; nhs_number.generate(quantity=5, for_region=nhs_number.REGION_ENGLAND)\n['6239431915', '7634140872', '4069990771', '4453051670', '4843474045']\n\n# Normalisation\n&gt;&gt;&gt; nhs_number.normalise_number(\"406-999-0771\")\n'4069990771'\n</code></pre> Validation, generation and normalisation of NHS Numbers <p>A Python package to provide utilities for NHS Numbers, including validity checks, normalisation, and generation.</p> <p>While validating an NHS Number is straightforward to achieve in code, it seems wasteful for developers to implement their own solutions. Further, many developers are likely unaware of the various rules and nuances of NHS/CHI/H&amp;C Numbers across the UK Nations.</p> <p>This package aims to provide a single, well-maintained, well-documented solution for all developers.</p> <p><code>nhs-number</code> is a collaboration between several individuals, groups and teams, each separately maintaining an NHS Number Python package. See Contributors for more information.</p>"},{"location":"#features","title":"Features","text":"<ul> <li>Validation of NHS Numbers using the check-digit algorithm.</li> <li>Generation of valid and invalid NHS Numbers for testing purposes, for any selected <code>Region</code>.</li> <li>Normalisation of NHS Numbers from various string formats to a standard 10-digit string format.</li> <li>Additional details and information on an NHS number, such as the region for which it's valid, and the reason for invalidity, if invalid.</li> </ul> <p>IMPORTANT: You should never need to generate an NHS Number for a live system</p> <p>Live NHS, CHI, H&amp;C and IHI numbers are always generated by some kind of central authority or registry, such as the NHS Spine in England, and they are assigned to patients, often at or near birth or at the point of becoming a user of that health system.</p> <p>Unless you represent a central health authority, you should not need to generate an NHS Number for a live system. If you are a patient, you should never need to generate an NHS Number for yourself.</p> <p>This package is intended for use in testing and development environments where you need to generate NHS Numbers for testing, research purposes, or synthetic data generation.</p> <p>Scottish CHI Number validation</p> <p>At present, this library does not reliably validate Scottish CHI Numbers. This is because the first 6 digits of a Scottish CHI Number must be a valid DDMMYY Date of Birth, and this library does not currently check for this. At the moment, only the correct number range is checked for.</p>"},{"location":"#roadmap","title":"Roadmap","text":"<ul> <li>Additional validation for Scottish CHI numbers to ensure the first 6 digits are a valid <code>DDMMYY</code> Date of Birth.</li> <li>Generation of valid Scottish CHI numbers along the same rules.</li> <li>Validation and generation of IHI Numbers for the Republic of Ireland, subject to contributors wanting to collaborate on this, and there being a demand for implementation.</li> </ul>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#136","title":"1.3.6","text":"<ul> <li>Adds Python 3.13 to the supported versions which are tested in the GitHub Action CI/CD pipeline. No versions have been removed.</li> <li>Adds a Github Action workflow to publish the documentation site to GitHub Pages.</li> <li>Removes the now-defunct <code>uk-fci.tech</code> domain in all of this package, replacing with (for now) uk-fci.github.io until we decide what to do with the <code>uk-fci</code> GH organisation.</li> <li>Removes all references to Netlify, as we no longer use it for the documentation site.</li> </ul>"},{"location":"changelog/#135","title":"1.3.5","text":"<ul> <li>Adds Python 3.12 to the supported versions which are tested in the GitHub Action CI/CD pipeline.</li> <li>Removes Python 3.7 from the supported versions which are tested in the GitHub Action CI/CD pipeline.</li> <li>Adds a source document regarding the NHS number specification to the docs/_source-documents folder.</li> <li>Upgrades all GitHub Actions within workflows (eg <code>actions/checkout@v3</code>) to latest version of the Node 20-based actions</li> </ul>"},{"location":"changelog/#134","title":"1.3.4","text":"<ul> <li>Revert of the new logo, minor edits to the documentation, accepted Anchit PR</li> <li>Reverted to plain code rather than Carbon for the code snippets.</li> <li>No changes to Python code</li> </ul>"},{"location":"changelog/#133","title":"1.3.3","text":"<ul> <li>Aesthetic documentation updates</li> </ul>"},{"location":"changelog/#132","title":"1.3.2","text":"<ul> <li>GitHub action for CI/CD to publish to live PyPi</li> <li>Minor documentation updates</li> </ul>"},{"location":"changelog/#131","title":"1.3.1","text":"<ul> <li>Changed to Netlify for documentation site deployment</li> <li>GitHub action for CI/CD to publish to Test PyPi</li> </ul>"},{"location":"changelog/#130-refactor-june-2023","title":"1.3.0 (Refactor, June 2023)","text":"<ul> <li>GitHub repo is transferred from Andy Law to the Faculty of Clinical Informatics.</li> <li>Extensive refactor to add new features such as generation of NHS numbers.</li> <li>Adds documentation site published to GitHub Pages with GitHub Actions publication.</li> <li>Adds GitHub Actions for CI/CD to publish to PyPI.</li> <li>Python version support added for 3.11</li> <li>Python version support dropped for 3.5, Python 2, etc</li> </ul>"},{"location":"changelog/#122","title":"1.2.2","text":"<ul> <li>Adds support for additional Python versions (3.8, 3.9, 3.10).</li> </ul>"},{"location":"changelog/#121","title":"1.2.1","text":"<ul> <li>Original package is known as <code>nhs-number</code> on PyPI and NhsNumberChecks on GitHub.</li> </ul>"},{"location":"contributors/","title":"Contributors","text":""},{"location":"contributors/#acknowledgements","title":"Acknowledgements","text":"<p>This package is a collaboration between several individuals, groups and teams, each separately maintaining some NHS Number Python package. Rather than having several packages with overlapping functionality, it was thought that combining efforts into a single package would be better.</p> <p>The package derives from code written by Andy Law at the Roslin Institute, and to place it under the aegis of an Organisation on GitHub, it has been adopted by the Faculty of Clinical Informatics, with the collective aim to develop it into the canonical NHS Number package for Python.</p>"},{"location":"contributors/#authors-and-contributors","title":"Authors and contributors","text":"<ul> <li> <p>Andy Law - author of the PyPi package nhs-number, head of research computing at The Roslin Institute.</p> </li> <li> <p>Matt Stibbs - author of nhspy.</p> </li> <li> <p>Marcus Baw - Freelance developer working at the RCPCH.</p> </li> <li> <p>Simon Chapman - Freelance developer working at the RCPCH.</p> </li> <li> <p>Anchit Chandran - Freelance developer working at the RCPCH.</p> </li> <li> <p>Mark Bailey - Acting Chair of the Faculty of Clinical Informatics.</p> </li> <li> <p>Mark Sellors - author of nhssums.</p> </li> <li> <p>Iain-S - author of nhs_number_generator.</p> </li> </ul>"},{"location":"developing/","title":"Project Structure","text":""},{"location":"developing/#folder-overview","title":"Folder overview","text":"<pre><code>\u251c\u2500\u2500 docs/               # documentation source files in Markdown format\n\u251c\u2500\u2500 nhs_number/         # Python package source code\n\u251c\u2500\u2500 tests/              # Python package tests\n\u251c\u2500\u2500 __init__.py\n\u251c\u2500\u2500 LICENSE             # MIT License\n\u251c\u2500\u2500 mkdocs.yml          # Configuration file for the Material for MkDocs documentation site\n\u251c\u2500\u2500 netlify.toml        # Netlify build file - required for Netlify to build the documentation site\n\u251c\u2500\u2500 pyproject.toml      # Poetry configuration file - defines dependencies, etc\n\u251c\u2500\u2500 pytest.ini          # pytest configuration file - defines test discovery, etc\n\u251c\u2500\u2500 README.md\n\u251c\u2500\u2500 requirements.txt\n\u251c\u2500\u2500 runtime.txt         # Python version specification for Netlify\n\u2514\u2500\u2500 setup.cfg\n</code></pre>"},{"location":"developing/#testing","title":"Testing","text":"<p>This project uses <code>pytest</code> for testing. The test suite can be run with:</p> <pre><code>poetry run pytest\n</code></pre>"},{"location":"developing/#publishing-to-pypi","title":"Publishing to PyPi","text":"<p>This project uses Poetry for dependency management and packaging.</p> <p>Any edit MUST have a new version number otherwise it will be rejected by PyPi.</p> <p>To publish a new version to PyPi, update the version number in <code>pyproject.toml</code>.</p> <p>Also add a note to the <code>docs/changelog.md</code> file to explain the updates.</p> <p>Publication to PyPi is handled by GitHub Actions. The workflows are defined in the <code>.github/workflows</code> folder.</p> <p>Pushes of code to the <code>staging</code> branch will trigger a publication to Test PyPi.</p> <p>Pushes of code to the <code>main</code> branch will trigger a publication to live PyPi.</p>"},{"location":"documentation/","title":"Documentation","text":"<p>The main documentation site is at https://uk-fci.github.io/nhs-number/. Pushes of code to the <code>main</code> branch will automatically trigger a publication to Netlify.</p> <p>Non-<code>main</code> branches of the documentation are no longer automatically published for review purposes:</p>"},{"location":"documentation/#material-for-mkdocs","title":"Material for MkDocs","text":"<p>We use MkDocs along with the Material for MkDocs theme.</p> <p>You can suggest changes directly through PRs.</p> <p>When developing the documentation site, we recommend the use of a linter such as markdownlint for VSCode to standardise formatting.</p>"},{"location":"ihi-ireland/","title":"Individual Health Identifier (IHI) - Ireland","text":""},{"location":"ihi-ireland/#what-is-an-ihi","title":"What is an IHI?","text":"<p>The Individual Health Identifier (IHI) is a single patient identifier used across the Republic of Ireland. It is a 16-digit GS1 code, which embeds the 'NHS number' section within it.</p> <p>We were unable to find much detail about the detailed technical structure of the IHI published on the open internet, but following some inquiries we were able to obtain the following information from the HSE:</p> <p>A subset of NHS Numbers were reserved for the Republic of Ireland. Core IHI numbers align with this bank of numbers and are currently drawn from a range of 81200000n to 85999999n, where <code>n</code> is a standard NHS number modulo 11 check digit from 0 to 9.</p> <p>The full IHI number is 18 digits long and the 'core' number (NHS number portion) resides in positions 8 to 17 of the full 18 digit number. There are 2 check digits in place \u2013 one at the end of the core 10 digit number (Modulus 11 check) and one at the end of the full 18 digit number (GS1 check digit).</p> <p>The first seven digits of the GS1 code are intended to ensure that the IHI number is globally unique:</p> <ul> <li>Production \u2013 IHI numbers starting with GS1 value \u20185393014\u2019</li> <li>Test \u2013 IHI numbers starting with GS1 value \u20185393054\u2019</li> </ul> <pre><code>IHI number: 5393014 81200000 0 0\n            |       |        | |\n            GS1     |        | |\n            Prefix  Core     | |\n                    IHI      | |\n                             | GS1 check digit\n                             |\n                             Modulus 11 check digit\n</code></pre>"},{"location":"ihi-ireland/#nhs-number-package-support-for-ihi","title":"<code>nhs-number</code> package support for IHI","text":"<p>At present we consider validation and generation of IHI numbers to be out of scope for this project.</p> <p>We would be very willing to collaborate with any interested parties to add support for IHI numbers to this project.</p>"},{"location":"ihi-ireland/#sources-references","title":"Sources / References","text":"<ul> <li> <p>https://www.hse.ie/eng/about/who/national-services/individual-health-identifier/</p> </li> <li> <p>https://github.com/uk-fci/nhs-number/issues/9</p> </li> </ul>"},{"location":"installation/","title":"Install","text":"<p>To install using <code>pip</code>:</p> <pre><code>pip install nhs-number\n</code></pre>"},{"location":"installation/#dependencies","title":"Dependencies","text":"<p><code>nhs-number</code> has no external dependencies for normal usage.</p> <p>If developing or running tests, you may need to install the development dependencies:</p> <pre><code>pip install -r requirements/development-requirements.txt\n</code></pre>"},{"location":"nhs-numbers/","title":"About NHS Numbers","text":""},{"location":"nhs-numbers/#what-is-an-nhs-number","title":"What is an NHS Number?","text":"<p>The NHS Number is a single patient identifier used across the NHS. In the various UK Nations, it is referred to by different terminology and may have different validation rules.</p>"},{"location":"nhs-numbers/#how-do-i-find-out-my-nhs-number","title":"How do I find out my NHS Number?","text":"<p>Identifying individual NHS Numbers is outside the scope of this package. Still, if you are curious, you can find out your NHS number here NHS website for patients in England, Wales and the IOM, and here NHS Scotland for patients in Scotland.</p>"},{"location":"nhs-numbers/#england-wales-and-the-isle-of-man","title":"England, Wales and the Isle of Man","text":"<p>The NHS Number is a single patient identifier used across the NHS in England, Wales, and the Isle of Man.</p> <p>In 2015, the NHS Number was legally mandated to be used as a single patient identifier across health and care with the introduction of the The Health and Social Care (Safety and Quality) Bill.</p> <p>The use of the NHS number in health and care organisations in England is specified in the Information Standards Board standard ISB 0149 NHS Number (Note that these NHS Digital links, while live at the time of editing this documentation, may at some stage move to NHS England following the merger of those organisations, which is ongoing, in 2023)</p>"},{"location":"nhs-numbers/#scotland","title":"Scotland","text":"<p>Scotland calls the identifier a Community Health Index (CHI) Number, using a similar standard for check-digit validation. However, the first 6 digits of the number are the date of birth in the format <code>DDMMYY</code> rather than a sequential number. Following this, there is a 3-sequence number.</p> <p>The ninth digit is always even for females and odd for males.</p>"},{"location":"nhs-numbers/#northern-ireland","title":"Northern Ireland","text":"<p>Northern Ireland has similar single patient identifiers, referred to as the Health and Care Number (H&amp;C Number).</p>"},{"location":"nhs-numbers/#republic-of-ireland","title":"Republic of Ireland","text":"<p>While the Republic of Ireland is its own sovereign state, independent from the UK, using its own Individual Health Identifier (IHI) number, it is included here for completeness because the IHI internally uses the range of identifiers reserved for it as per the table below and the NHS Number may possibly be used in cross-border care.</p> <p>For more detail, see Individual Health Identifier (IHI).</p>"},{"location":"nhs-numbers/#nhs-number-ranges","title":"NHS Number Ranges","text":""},{"location":"nhs-numbers/#live-nhs-number-ranges","title":"Live NHS Number Ranges","text":"<p>This table shows how different ranges within the standard number format are distributed across the UK and Ireland.</p> <p><code>n</code> represents a digit, <code>0-9</code>, which is the check digit.</p> Range Usage Description 010000000n - 319999999n Scotland Used for Scottish Community Health Index (CHI) numbers, which have historically contained the date of birth as the first 6 digits. 320000000n - 399999999n Northern Ireland Used for NI Health and Care Numbers. 400000000n - 499999999n England, Wales, IOM Used for NHS numbers in England, Wales and the Isle of Man. 600000000n - 799999999n England, Wales, IOM Used for NHS numbers in England, Wales and the Isle of Man. 800000000n - 859999999n Republic of Ireland Used by the Republic of Ireland within the IHI (digits 8-17)."},{"location":"nhs-numbers/#testunallocated-number-ranges","title":"Test/Unallocated Number Ranges","text":"<p>This table shows the ranges not assigned to live use (e.g. testing, unallocated).</p> Range Usage Description 500000000n - 599999999n Testing Used for NHS Care Records Service internal testing. 860000000n - 899999999n Spare Unallocated range to allow for future expansion. 900000000n - 999999999n Testing Unallocated and Development / Test systems to use this range."},{"location":"nhs-numbers/#nhs-number-check-digit-validation","title":"NHS Number Check Digit Validation","text":"<p>NHS Numbers in England, Wales and the Isle of Man are a simple 9-digit number with a check digit. The check digit is calculated using a variation of the Luhn algorithm (also known as the Modulus 11 algorithm).</p> <p>This check digit is intended to make the number somewhat resistant to accidental transcription errors, not to make it cryptographically secure.</p>"},{"location":"nhs-numbers/#information-sources","title":"Information Sources","text":"<ul> <li> <p>Wikipedia: NHS numbers</p> </li> <li> <p>NHS Numbers and the systems used to manage them - An overview for research users</p> </li> <li> <p>CHI Numbers reference</p> </li> <li> <p>Individual Health Identifier (IHI) for Ireland</p> </li> </ul>"},{"location":"nhs-numbers/#further-reading","title":"Further reading","text":"<p>For those with an unnaturally strong interest in the NHS Number, you may enjoy the following:</p> <ul> <li>blu3id's Three Word NHS Number POC</li> </ul>"},{"location":"usage/","title":"Usage","text":"<p>IMPORTANT: You should never need to generate an NHS Number for a live system</p> <p>Live NHS, CHI, H&amp;C and IHI numbers are always generated by some kind of central authority or registry, such as the NHS Spine in England, and they are assigned to patients, often at or near birth or at the point of becoming a user of that health system.</p> <p>Unless you represent a central health authority, you should not need to generate an NHS Number for a live system. If you are a patient, you should never need to generate an NHS Number for yourself.</p> <p>This package is intended for use in testing and development environments where you need to generate NHS Numbers for testing, research purposes, or synthetic data generation.</p>"},{"location":"usage/#is_valid","title":"<code>is_valid()</code>","text":"<p>Returns <code>True</code> if the NHS Number is valid. Returns <code>False</code> if the NHS Number is not valid.</p> <p>Arguments:</p> <ul> <li><code>nhs_number</code> (required, <code>str</code>): The NHS Number to validate. Valid formats are:<ul> <li><code>123 456 7890</code></li> <li><code>123-456-7890</code></li> <li><code>1234567890</code></li> </ul> </li> <li><code>for_region</code> (optional, default=None, <code>Region</code>): If provided, additionally validates number is included within the given <code>Region</code> range.</li> </ul> <pre><code>import nhs_number\n\nnhs_number.is_valid('4698194180')\n# True\n\nnhs_number.is_valid('1234567890')\n# False\n</code></pre> <p>The <code>for_region</code> parameter takes any of the <code>nhs_number.REGION_*</code> constants:</p> <pre><code>nhs_number.is_valid('7709030025', for_region=nhs_number.REGION_ENGLAND)\n# True\n</code></pre> <p>Scottish CHI Number validation</p> <p>At present, this library does not reliably validate Scottish CHI Numbers. This is because the first 6 digits of a Scottish CHI Number must be a valid DDMMYY Date of Birth, and this library does not currently check for this. At the moment, only the correct number range is checked for.</p>"},{"location":"usage/#normalise_number","title":"<code>normalise_number()</code>","text":"<p>Returns normalised 10-digit NHS Number without spaces, as a string.</p> <p>Arguments:</p> <ul> <li><code>nhs_number</code> (required, <code>str | int</code>): The NHS Number <code>int</code> or <code>str</code> to normalise.</li> </ul> <pre><code>import nhs_number\n\nnhs_number.normalise_number('123 456 7891')\n# '1234567891'\n\nnhs_number.normalise_number('1234567891')\n# '1234567891'\n\nnhs_number.normalise_number('123-456-7890')\n# '1234567890'\n</code></pre>"},{"location":"usage/#generate","title":"<code>generate()</code>","text":"<p>Returns list of valid or invalid normalised NHS numbers, as strings, for testing.</p> <p>Arguments:</p> <ul> <li><code>valid</code> (optional, default=True, <code>bool</code>): Determines whether generated numbers are valid or invalid.</li> <li><code>for_region</code> (optional, default=None, <code>Region</code>): If provided, generates numbers within the given <code>Region</code> range.</li> <li><code>quantity</code> (optional, default=1, <code>int</code>): Determines number of NHS number strings returned.</li> </ul> <pre><code>import nhs_number\n\nnhs_number.generate()\n# ['1633104249']\n\nnhs_number.generate(quantity=5)\n# ['1633104249', '1633104257', '1633104265', '1633104273', '1633104281']\n</code></pre> <p>The <code>for_region</code> parameter takes any of the <code>nhs_number.REGION_*</code> constants:</p> <pre><code>nhs_number.generate(for_region=nhs_number.REGION_ENGLAND)\n# ['7709030025']\n</code></pre>"},{"location":"usage/#nhsnumber-object","title":"<code>NhsNumber</code> object","text":"<p>For further details on the NHS number, including further <code>Region</code>-specific information, instantiate an <code>NhsNumber</code> object using a valid NHS number as a string:</p> <pre><code>from nhs_number import NhsNumber\n\nnhs_number = NhsNumber('9876543210')\n\nvars(nhs_number)\n# {'nhs_number': '9876543210', 'identifier_digits': '987654321', 'check_digit': 0, 'valid': True, 'calculated_checksum': 0, 'region': &lt;nhs_number.constants.Region object at 0x000001A0AD3CD490&gt;, 'region_comment': 'Not to be issued (Synthetic/test patients PDS)'}\n</code></pre>"},{"location":"usage/#regions","title":"Regions","text":"<p>You can obtain Region objects via the package's <code>REGION_*</code> constants. See NHS Number Ranges for details on ranges.</p> <p>Obtain a dictionary of available <code>Range</code> objects: <pre><code>import nhs_number\n\nnhs_number.REGIONS\n# {'UNALLOCATED': &lt;nhs_number.constants.Region object at 0x7fda8e0b0e50&gt;, 'SCOTLAND': &lt;nhs_number.constants.Region object at 0x7fda8e0b0d10&gt;, 'NORTHERN_IRELAND': &lt;nhs_number.constants.Region object at 0x7fda8e0b0d90&gt;, 'ENGLAND_WALES_IOM': &lt;nhs_number.constants.Region object at 0x7fda8e0b0d50&gt;, 'RESERVED': &lt;nhs_number.constants.Region object at 0x7fda8e0b0e90&gt;, 'EIRE': &lt;nhs_number.constants.Region object at 0x7fda8e0b0dd0&gt;, 'SYNTHETIC': &lt;nhs_number.constants.Region object at 0x7fda8e0b0e10&gt;}\n</code></pre></p> <p>Get a Region object for England: <pre><code>nhs_number.ENGLAND_WALES_IOM\n# &lt;nhs_number.constants.Region object at 0x7fda8e0b0d50&gt;\n</code></pre></p> <p>Each Region has some aliases for ease of use: <pre><code>nhs_number.ENGLAND_WALES_IOM == nhs_number.REGION_ENGLAND\n# True\n</code></pre></p> <p>Scottish CHI Number validation</p> <p>At present, this library does not reliably validate Scottish CHI Numbers. This is because the first 6 digits of a Scottish CHI Number must be a valid DDMMYY Date of Birth, and this library does not currently check for this. At the moment, only the correct number range is checked for.</p>"},{"location":"_assets/_snippets/live-usage-warning/","title":"Live usage warning","text":"<p>IMPORTANT: You should never need to generate an NHS Number for a live system</p> <p>Live NHS, CHI, H&amp;C and IHI numbers are always generated by some kind of central authority or registry, such as the NHS Spine in England, and they are assigned to patients, often at or near birth or at the point of becoming a user of that health system.</p> <p>Unless you represent a central health authority, you should not need to generate an NHS Number for a live system. If you are a patient, you should never need to generate an NHS Number for yourself.</p> <p>This package is intended for use in testing and development environments where you need to generate NHS Numbers for testing, research purposes, or synthetic data generation.</p>"},{"location":"_assets/_snippets/scottish-chi-number/","title":"Scottish chi number","text":"<p>Scottish CHI Number validation</p> <p>At present, this library does not reliably validate Scottish CHI Numbers. This is because the first 6 digits of a Scottish CHI Number must be a valid DDMMYY Date of Birth, and this library does not currently check for this. At the moment, only the correct number range is checked for.</p>"}]}